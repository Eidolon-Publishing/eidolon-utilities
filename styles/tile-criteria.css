.eidolon-tile-criteria {
  margin-top: 0;
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
}

.eidolon-tile-criteria__tree-panel {
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
}

.eidolon-tile-criteria__editor-header h4 {
  margin: 0;
  font-size: 0.9rem;
}

.eidolon-tile-criteria__root {
  margin: 0;
  font-size: 0.75rem;
}

.eidolon-tile-criteria__library-tree {
  max-height: 20rem;
  overflow: auto;
  padding-right: 0.2rem;
}

.eidolon-tile-criteria__filter-row {
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  align-items: center;
  gap: 0.35rem;
  margin-bottom: 0.75rem;
}

.eidolon-tile-criteria__toolbar {
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
}

.eidolon-tile-criteria__mode-bar {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 0.2rem;
}

.eidolon-tile-criteria__mode-button {
  width: auto;
  min-width: 0;
  flex: 0 0 auto;
  white-space: nowrap;
  border: 1px solid var(--color-border-light-tertiary, rgba(0, 0, 0, 0.2));
  border-radius: 0.3rem;
  padding: 0.15rem 0.42rem;
  font-size: 0.72rem;
  line-height: 1.2;
  background: color-mix(in srgb, var(--color-bg-option, transparent) 35%, transparent);
}

.eidolon-tile-criteria__mode-button:disabled {
  opacity: 0.45;
  cursor: not-allowed;
}

.eidolon-tile-criteria__mode-button.is-active {
  background: color-mix(in srgb, var(--color-warm-1, #cf9f4a) 24%, transparent);
  border-color: var(--color-warm-1, #cf9f4a);
  font-weight: 600;
}

.eidolon-tile-criteria__toolbar-actions {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
}

.eidolon-tile-criteria__toolbar-action {
  width: auto;
  min-width: 0;
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.22rem 0.5rem;
}

.eidolon-tile-criteria__toolbar-action i {
  margin: 0;
}

.eidolon-tile-criteria__toolbar-action.icon-only {
  width: 2rem;
  height: 2rem;
  padding: 0;
  justify-content: center;
}

@media (max-width: 720px) {
  .eidolon-tile-criteria__toolbar-actions {
    justify-content: flex-end;
  }
}

.eidolon-tile-criteria__filter-input {
  width: 100%;
}

.eidolon-tile-criteria__filter-error {
  margin: 0;
  color: var(--color-level-error, #c53030);
}

.eidolon-tile-criteria__tree {
  margin: 0;
  padding-left: 1rem;
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.eidolon-tile-criteria__tree-branch {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.eidolon-tile-criteria__folder-row {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.1rem 0;
}

.eidolon-tile-criteria__folder-row i {
  color: var(--color-text-secondary, inherit);
}

.eidolon-tile-criteria__tree-folder-label {
  font-size: 0.76rem;
  font-weight: 600;
  color: var(--color-text-secondary, inherit);
}

.eidolon-tile-criteria__tree-file {
  list-style: none;
  display: block;
}

.eidolon-tile-criteria__tree-file + .eidolon-tile-criteria__tree-file {
  margin-top: 0.2rem;
}

.eidolon-tile-criteria__document-list {
  margin: 0;
  padding-left: 0;
  display: flex;
  flex-direction: column;
  gap: 0.2rem;
}

.eidolon-tile-criteria__file-row {
  width: 100%;
  height: auto !important;
  min-height: 0;
  display: grid;
  grid-template-columns: auto minmax(0, 1fr) auto;
  gap: 0.4rem;
  align-items: flex-start;
  line-height: 1.2;
  white-space: normal;
  border: 1px solid var(--color-border-light-tertiary, rgba(0, 0, 0, 0.2));
  border-radius: 4px;
  padding: 0.25rem 0.4rem;
  background: color-mix(in srgb, var(--color-bg-option, transparent) 40%, transparent);
}

.eidolon-tile-criteria__file-content {
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 0.2rem;
}

.eidolon-tile-criteria__file-heading {
  min-width: 0;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 0.35rem;
}

.eidolon-tile-criteria__file-row.is-selected {
  border-color: var(--color-warm-1, #cf9f4a);
}

.eidolon-tile-criteria__file-row.has-warning {
  border-color: var(--color-border-highlight, #d9a441);
}

.eidolon-tile-criteria__file-row.has-conflict {
  border-color: var(--color-level-error-border, #c53030);
  box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--color-level-error-border, #c53030) 45%, transparent);
}

.eidolon-tile-criteria__row-warning {
  align-self: flex-start;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 0.9rem;
  line-height: 1;
}

.eidolon-tile-criteria__row-warning[data-mode="error"] {
  color: var(--color-level-error, #c53030);
}

.eidolon-tile-criteria__row-warning[data-mode="warning"] {
  color: var(--color-border-highlight, #d9a441);
}

.eidolon-tile-criteria__indicator {
  width: 0.5rem;
  height: 0.5rem;
  border-radius: 50%;
  background: var(--color-text-light-6, #777);
}

.eidolon-tile-criteria__indicator[data-kind="default"] {
  background: var(--color-warm-1, #cf9f4a);
}

.eidolon-tile-criteria__indicator[data-kind="mapped"] {
  background: var(--color-level-success, #3e8c3e);
}

.eidolon-tile-criteria__file-title {
  min-width: 0;
  flex: 1 1 auto;
  white-space: normal;
  overflow-wrap: anywhere;
  text-align: left;
  font-size: 0.78rem;
  line-height: 1.2;
}

.eidolon-tile-criteria__index-badge {
  flex: 0 0 auto;
  align-self: flex-start;
}

.eidolon-tile-criteria__badges {
  display: flex;
  align-items: flex-start;
  flex-wrap: wrap;
  gap: 0.2rem;
}

.eidolon-tile-criteria__badge {
  border: 1px solid var(--color-border-light-tertiary, rgba(0, 0, 0, 0.2));
  border-radius: 999px;
  padding: 0.04rem 0.4rem;
  font-size: 0.68rem;
  white-space: nowrap;
}

.eidolon-tile-criteria__badge[data-kind="default"] {
  border-color: var(--color-warm-1, #cf9f4a);
}

.eidolon-tile-criteria__badge[data-kind="rule"] {
  border-color: var(--color-border-highlight-alt, rgba(0, 0, 0, 0.28));
}

.eidolon-tile-criteria__dialog-content {
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
}

.eidolon-tile-criteria__editor-header {
  display: flex;
  flex-direction: column;
  gap: 0.15rem;
}

.eidolon-tile-criteria__editor-header p {
  margin: 0;
  font-size: 0.75rem;
}

.eidolon-tile-criteria__editor-controls {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
}

.eidolon-tile-criteria__editor-action {
  width: auto;
}

.eidolon-tile-criteria__rule-editors {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.eidolon-tile-criteria__rule-editor {
  border: 1px solid var(--color-border-light-tertiary, rgba(0, 0, 0, 0.2));
  border-radius: 6px;
  padding: 0.45rem;
  display: flex;
  flex-direction: column;
  gap: 0.45rem;
}

.eidolon-tile-criteria__rule-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(8.5rem, 1fr));
  gap: 0.35rem;
}

.eidolon-tile-criteria__rule-field {
  display: flex;
  flex-direction: column;
  gap: 0.2rem;
}

.eidolon-tile-criteria__criterion-label {
  font-size: 0.73rem;
  color: var(--color-text-secondary, inherit);
  font-weight: 600;
}

.eidolon-tile-criteria__rule-remove {
  width: auto;
  align-self: flex-start;
}

.eidolon-tile-criteria__conflicts {
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
  margin: 0;
  padding: 0.45rem 0.55rem;
  border: 1px solid var(--color-border-light-tertiary, rgba(0, 0, 0, 0.2));
  border-radius: 4px;
  background: color-mix(in srgb, var(--color-bg-option, transparent) 30%, transparent);
}

.eidolon-tile-criteria__conflict-summary {
  margin: 0;
  font-size: 0.75rem;
}

.eidolon-tile-criteria__conflict-summary[data-mode="error"] {
  color: var(--color-level-error, #c53030);
  font-weight: 600;
}

.eidolon-tile-criteria__conflict-summary[data-mode="warning"] {
  color: var(--color-text-secondary, inherit);
}

.eidolon-tile-criteria__conflict-hint {
  margin: 0;
  font-size: 0.72rem;
}

.eidolon-tile-criteria__status {
  margin: 0;
  padding: 0.4rem 0.5rem;
  border: 1px solid var(--color-border-light-tertiary, rgba(0, 0, 0, 0.2));
  border-radius: 4px;
}

.eidolon-tile-criteria__status[data-mode="error"] {
  border-color: var(--color-level-error-border, #c53030);
}
